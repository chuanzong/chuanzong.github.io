<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
	<link href="http://qiqu.uc.cn/qiqu/2.12.7/favicon.ico" rel="shortcut icon" type="image/x-icon">

	<title>每日排行榜</title>

	<link rel="stylesheet" href="set.css">
	<link rel="stylesheet" href="de.css">
</head>
<body>

<div id="app">
	<div class="rl" data-pageid="/rl" style="display: block; z-index: 1;">
		<div class="detail-header hide">
			<p class="detail-header-title">
				<span slot="title">
					每日排行榜
				</span>
			</p>
		</div>
		<div>
			<ul class="rl-tabs" style="top:0">
				<li class="tab tab_active" data-ckrg="每日排行榜" data-ckpo="趣图排行榜">
					趣图
				</li>
				<li class="tab" data-ckrg="每日排行榜" data-ckpo="段子排行榜">
					段子
				</li>
				<li class="tab" data-ckrg="每日排行榜" data-ckpo="神吐槽排行榜">
					神吐槽
				</li>
			</ul>
			<div class="rl-listCont">
				<div class="rl-list rl-list_tuwen" >
				
				</div>
				<div class="rl-list rl-list_joke" style="display: none;">

				</div>
				<div class="rl-list rl-list_shentucao" style="display: none;">

				</div>
				<!-- 表态 -->
				<div class="cw-opinion">
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						奇葩年年有，今年特别多!
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						没见过这么好笑的~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						好萌好萌哒~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						贱是一种人生态度~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						戳完还戳？戳痛人家了啦~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						好萌好萌哒~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						贱是一种人生态度~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						吊炸天了！请收下我的膝盖~
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						太坑爹，真是哔了狗了!
					</p>
					<p class="cw-incrs-tip cw-incrs-tip-transition" style="display: none;">
						深得朕的欢心，朕很满意~
					</p>
					<p class="cw-optionT s-b">
						看完了表个态呗 (251人参与)
					</p>
					<div class="cw-incrsCont">
						<div class="cw-incrs cw-incrs1" data-ckrg="长内容" data-ckpo="屌">
							<span class="cw-incrs-name">
								屌
							</span>
							<span class="cw-incrs-num">
								104
							</span>
							<span class="cw-incrs-bar" style="height: 22.7888px;">
							</span>
						</div>
						<div class="cw-incrs cw-incrs2" data-ckrg="长内容" data-ckpo="坑">
							<span class="cw-incrs-name">
								坑
							</span>
							<span class="cw-incrs-num">
								37
							</span>
							<span class="cw-incrs-bar" style="height: 8.10757px;">
							</span>
						</div>
						<div class="cw-incrs cw-incrs3" data-ckrg="长内容" data-ckpo="爱">
							<span class="cw-incrs-name">
								爱
							</span>
							<span class="cw-incrs-num">
								44
							</span>
							<span class="cw-incrs-bar" style="height: 9.64143px;">
							</span>
						</div>
						<div class="cw-incrs cw-incrs4" data-ckrg="长内容" data-ckpo="贱">
							<span class="cw-incrs-name">
								贱
							</span>
							<span class="cw-incrs-num">
								66
							</span>
							<span class="cw-incrs-bar" style="height: 14.4622px;">
							</span>
						</div>
					</div>
				</div>
				<!-- 广告 -->
				<div class="i-ad">
					<div class="hide"> </div>
					<div style="position: relative;"> </div>
				</div>
			</div>
			<!-- comment -->
			<div class="comm-wrap" style="display: none;">
				<!-- loading -->
				<!-- 热门评论 -->
				<h3 class="comm-title sprite comm-title_hot">
				</h3>
				<div class="hotComm-wrap">
					<div class="comm js-comm-hook js-comm" data-msg="高        " data-author="为什么会有昵称这种东西" data-id="50057025">
						<img class="lI-avatar js-comm-hook galleryLink" src="http://image.uc.cn/o/uop/1Ht08/;;0,uop/g/uop/avatar/16072218557040feb17632f379423e68ddca85d432.jpg;3,160">
						<div class="comm-rbox js-comm-hook">
							<p class="comm-author js-comm-hook">
								为什么会有昵称这种东西
							</p>
							<p class="comm-msg js-comm-hook">
								高
							</p>
						</div>
						<span class="comm-like s-b js-comm-like" data-index="0" data-hot="1">
							21
						</span>
					</div>
				</div>
				<!-- 普通评论 -->
				<h3 class="comm-title sprite">
					<span class="comm-total">
						(16)
					</span>
				</h3>
				<div>
					<div class="comm js-comm-hook js-comm" data-msg="最后一个动图，不是我们家心宁嘛[blush][blush]" data-author="喵～" data-id="50058043">
						<img class="lI-avatar js-comm-hook galleryLink" src="http://image.uc.cn/o/uop/1Ht08/;;0,uop/g/uop/avatar/160804172217109e70b0aa6cbaa273b1460fc020e7.jpg;3,160">
						<div class="comm-rbox js-comm-hook">
							<p class="comm-author js-comm-hook">
								喵～
							</p>
							<p class="comm-msg js-comm-hook">
								最后一个动图，不是我们家心宁嘛
								<span class="emo-face blush">
								</span>
								<span class="emo-face blush">
								</span>
							</p>
						</div>
						<span class="comm-like s-b js-comm-like" data-index="0">
							2
						</span>
					</div>
					<div class="comm js-comm-hook js-comm" data-msg="考                    " data-author="惑&amp;hearts;訫℡" data-id="50057269">
						<img class="lI-avatar js-comm-hook galleryLink" src="http://image.uc.cn/o/uop/1Ht08/;;0,uop/g/uop/avatar/1ztSwgMzH-2iC2788A.jpg;3,160">
						<div class="comm-rbox js-comm-hook">
							<p class="comm-author js-comm-hook">
								惑&amp;hearts;訫℡
							</p>
							<p class="comm-msg js-comm-hook">
								考
							</p>
						</div>
						<span class="comm-like s-b js-comm-like" data-index="1">
							10
						</span>
					</div>
					<div class="comm js-comm-hook js-comm" data-msg="高        " data-author="为什么会有昵称这种东西" data-id="50057025">
						<img class="lI-avatar js-comm-hook galleryLink" src="http://image.uc.cn/o/uop/1Ht08/;;0,uop/g/uop/avatar/16072218557040feb17632f379423e68ddca85d432.jpg;3,160">
						<div class="comm-rbox js-comm-hook">
							<p class="comm-author js-comm-hook">
								为什么会有昵称这种东西
							</p>
							<p class="comm-msg js-comm-hook">
								高
							</p>
						</div>
						<span class="comm-like s-b js-comm-like" data-index="2">
							21
						</span>
					</div>
				</div>
				<p class="comm-more">
					点击查看更多
				</p>
			</div>

		</div>
		<div class="footer s-b" data-ckrg="底部" data-ckpo="意见反馈">
			我都这么谦虚了，可以来这里提意见 &gt;
		</div>
	</div>
</div>

	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="de.js"></script>
	<script>
$(function(){
	$(".rl-tabs .tab").click(function(){
		// console.log($(this).index())
		$(this).addClass('tab_active').siblings().removeClass('tab_active')
		$(".rl-listCont .rl-list").eq($(this).index()).css("display","block").siblings().css("display","none")
	})
	    // background-position: -225px -175px;
	$(document).on('click','.hot-cm .cm-like',function(){
		if($(this).hasClass("cm-zan")){return;}
		$(this).addClass('cm-zan').html(parseInt($(this).html())+1)
	})




function detailData(iid){
	var durl = "http://napi.uc.cn/3/classes/topic/objects/"
	var dparam = {
		_app_id:"hottopic",
		_fetch:"1",
		_fetch_incrs:"1",
		_select:"title,desc,rl_tuwen,rl_joke,rl_shentucao,media_data",
		}
	$.get(durl+iid,dparam,function(da){
		console.log(da)
		document.title="每日排行榜 "+da.data.desc
		// console.log(da.data.rl_tuwen)
		addHtml_tuwen(da.data.rl_tuwen)
		addHtml_joke(da.data.rl_joke)
		addHtml_shentucao(da.data.rl_shentucao)
	})
}

// detailData("777d3bf36340ef6e901b595ba6904517")
function getQueryString(name) { 
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
	var r = window.location.search.substr(1).match(reg); 
	if (r != null) return unescape(r[2]); return null; 
} 
detailData(getQueryString("deta"))

function addHtml_tuwen(dat){
	$('.rl-list_tuwen').html('');
	for(var i in dat){
		// console.log((1*i+1),dat[i].media_data[0].format,dat[i].media_data[0].is_origin,parseInt(dat[i].media_data[0].origin_img_url.resolution))
		var imgHtml = "";

		if(dat[i].media_data && dat[i].media_data[0].format==="JPEG"){
			if(dat[i].media_data[0].is_origin===1){
				// console.log("小图")
				imgHtml = '<img class="lI-img galleryLink" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x">'
			}else{
				// console.log("大图")
				imgHtml ='<div class="longImgCont js-viewall js-viewall-root"><img class="lI-img js-viewall galleryLink js-longImg" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+(parseInt(dat[i].media_data[0].origin_img_url.resolution)>400?";6,L-0,500x750,0;3,320x":";6,L-0,320x480,0;3,320x")+'" data-long="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x"><p class="viewLongImg js-viewall js-viewLongImg"> 点击查看全图 </p> </div>'
			}
		}else{
			if(dat[i].media_data){
				imgHtml ='<div class="gifCont js-gif js-gif-root"> <div class="gifBtn sprite js-gif"> </div> <span class="spin-box" style="display:none"> <i class="spin"></i> </span> <img class="lI-img js-gif galleryLink js-img" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x;12" data-gif="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x"> </div>'
			}
		}
		// console.log(imgHtml.replace(/http:\/\/image\.uc\.cn\/s\/nav/ig, "http://image.uc.cn/o/nav/1k/;,70,;0,nav"))
		imgHtml = imgHtml.replace(/http:\/\/image\.uc\.cn\/s\/nav/ig, "http://image.uc.cn/o/nav/1k/;,70,;0,nav")
	
		var mhtml = '<div class="rl-item it" id="tuwen'+(1*i+1)+'">\n'
						+'<div class="lI-head">\n'
							+'<img class="lI-avatar galleryLink" src="'+dat[i].avatar+'">\n'
							+'<div class="lI-userName">\n'
							+dat[i].user_name+'\n'
							+'</div>\n'
						+'</div>\n'

						+'<span class="rl-badge">\n'
							+(1*i+1)+'\n'
						+'</span>\n'

						+'<p class="lI-content">\n'
							+dat[i].title+dat[i].content+'\n'
						+'</p>\n'

						+imgHtml

						+'<div class="hot-cm js-cm js-hot'+(dat[i].hot_comment.author?"":" hide")+'" data-ckrg="评论" data-ckpo="神吐槽">\n'
							+'<div class="cm-author s-b js-cm js-hot">\n'
								+dat[i].hot_comment.author+'\n'
								+'<span class="cm-like s-b js-cm js-hot">\n'
									+dat[i].hot_comment.like+'\n'
								+'</span>\n'
							+'</div>\n'
							+'<div class="cm-msg js-cm js-hot">\n'
								+dat[i].hot_comment.message+'\n'
							+'</div>\n'
						+'</div>\n'

						+'<div class="lI-meta">\n'
							+'<span class="lI-metaItem lI-like metaItem_disabled">\n'
							+'<i class="lI-metaIco sprite"> </i>\n'
						+dat[i].like+'\n'
						+'</span>\n'
						+'</div>\n'
					+'</div>\n'

		$(mhtml).appendTo($('.rl-list_tuwen'))

	}
}



function addHtml_joke(dat){
	$('.rl-list_joke').html('');
	for(var i in dat){
	var mhtml ='<div class="rl-item it" id="joke'+(1*i+1)+'">\n'
			+	'<div class="lI-head">\n'
			+		'<img class="lI-avatar galleryLink" src="'+dat[i].avatar+'">\n'
			+		'<div class="lI-userName">'+dat[i].user_name+'.</div></div>\n'
			+	'<span class="rl-badge">'+(1*i+1)+'</span>\n'
			+	'<p class="lI-content">'+dat[i].content+'</p>\n'
			+	'<div class="hot-cm js-cm js-hot '+(dat[i].hot_comment.author?"":"hide")+'" data-ckrg="评论" data-ckpo="神吐槽">\n'
			+		'<div class="cm-author s-b js-cm js-hot">'+dat[i].hot_comment.author
			+			'<span class="cm-like s-b js-cm js-hot">'+dat[i].hot_comment.like+'</span></div>\n'
			+		'<div class="cm-msg js-cm js-hot">'+dat[i].hot_comment.message+'</div></div>\n'
			+	'<div class="lI-meta">\n'
			+		'<span class="lI-metaItem lI-like metaItem_disabled">\n'
			+			'<i class="lI-metaIco sprite"></i>'+dat[i].like+'</span>\n'
			+	'</div>'
			+'</div>'

	$(mhtml).appendTo($('.rl-list_joke'))
	}
}

function addHtml_shentucao(dat){
	$('.rl-list_shentucao').html('');
	for(var i in dat){
		// console.log((1*i+1),dat[i].media_data[0].format,dat[i].media_data[0].is_origin,parseInt(dat[i].media_data[0].origin_img_url.resolution))
		var imgHtml = "";


		if(dat[i].media_data && dat[i].media_data[0].format==="JPEG"){
			if(dat[i].media_data[0].is_origin===1){
				// console.log("小图")
				imgHtml = '<img class="lI-img galleryLink" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x">'
			}else{
				// console.log("大图")
				imgHtml ='<div class="longImgCont js-viewall js-viewall-root"><img class="lI-img js-viewall galleryLink js-longImg" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+(parseInt(dat[i].media_data[0].origin_img_url.resolution)>400?";6,L-0,500x750,0;3,320x":";6,L-0,320x480,0;3,320x")+'" data-long="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x"><p class="viewLongImg js-viewall js-viewLongImg"> 点击查看全图 </p> </div>'
			}
		}else{
			if(dat[i].media_data){
				imgHtml ='<div class="gifCont js-gif js-gif-root"> <div class="gifBtn sprite js-gif"> </div> <span class="spin-box" style="display:none"> <i class="spin"></i> </span> <img class="lI-img js-gif galleryLink js-img" src="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x;12" data-gif="'+dat[i].media_data[0].origin_img_url.origin_pic_url+';3,320x"> </div>'
			}
		}
		// console.log(imgHtml.replace(/http:\/\/image\.uc\.cn\/s\/nav/ig, "http://image.uc.cn/o/nav/1k/;,70,;0,nav"))
		imgHtml = imgHtml.replace(/http:\/\/image\.uc\.cn\/s\/nav/ig, "http://image.uc.cn/o/nav/1k/;,70,;0,nav")
	
		var mhtml = '<div class="rl-item it" id="shentucao'+(1*i+1)+'">'
				+		'<div class="hot-cm js-cm js-hot" data-ckrg="评论" data-ckpo="神吐槽">'
				+			'<div class="cm-author s-b js-cm js-hot">'+dat[i].hot_comment.author
				+				'<span class="cm-like s-b js-cm js-hot">'+dat[i].hot_comment.like+'</span></div>'
				+			'<div class="cm-msg js-cm js-hot">'+dat[i].hot_comment.message+'</div></div>'
				+		'<div class="lI-head">'
				+			'<img class="lI-avatar galleryLink" src="'+dat[i].avatar+'">'
				+			'<div class="lI-userName">'+dat[i].user_name+'</div></div>'
				+		'<span class="rl-badge">'+(1*i+1)+'</span>'
				+		'<p class="lI-content">'+dat[i].title+'</p>'
				+		imgHtml
				+		'<div class="lI-meta">'
				+			'<span class="lI-metaItem lI-like metaItem_disabled">'
				+				'<i class="lI-metaIco sprite"></i>'+dat[i].like+'</span>'
				+		'</div>'
				+	'</div>'

		$(mhtml).appendTo($('.rl-list_shentucao'))
	}
	

}




})
	</script>
</body>
</html>